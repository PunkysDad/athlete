<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram id="gameiq-er-diagram" name="GameIQ Database ER Diagram">
    <mxGraphModel dx="1422" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="GameIQ Database ER Diagram" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#0066FF;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="369" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-exists" value="EXISTS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d4edda;strokeColor=#28a745;fontColor=#155724;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="70" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-new" value="NEW" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="70" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-modify" value="MODIFY" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8d7da;strokeColor=#dc3545;fontColor=#721c24;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="70" width="80" height="30" as="geometry" />
        </mxCell>
        
        <!-- Users table (EXISTS) -->
        <mxCell id="users" value="&lt;b&gt;users&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;firebase_uid&lt;br&gt;email&lt;br&gt;sport&lt;br&gt;position&lt;br&gt;subscription_tier&lt;br&gt;created_at&lt;br&gt;updated_at" style="whiteSpace=wrap;html=1;align=left;fillColor=#d4edda;strokeColor=#28a745;fontColor=#155724;" vertex="1" parent="1">
          <mxGeometry x="80" y="150" width="140" height="160" as="geometry" />
        </mxCell>
        
        <!-- Tags table (NEW) -->
        <mxCell id="tags" value="&lt;b&gt;tags&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;user_id (FK)&lt;br&gt;name&lt;br&gt;color&lt;br&gt;created_at" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="280" y="150" width="120" height="120" as="geometry" />
        </mxCell>
        
        <!-- Quiz Categories (NEW) -->
        <mxCell id="quiz_categories" value="&lt;b&gt;quiz_categories&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;sport&lt;br&gt;position&lt;br&gt;category_name&lt;br&gt;description" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="460" y="150" width="140" height="120" as="geometry" />
        </mxCell>
        
        <!-- Quiz Questions (NEW) -->
        <mxCell id="quiz_questions" value="&lt;b&gt;quiz_questions&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;category_id (FK)&lt;br&gt;question_id&lt;br&gt;scenario&lt;br&gt;question&lt;br&gt;options (JSON)&lt;br&gt;correct&lt;br&gt;explanation&lt;br&gt;difficulty&lt;br&gt;tags (JSON)" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="660" y="150" width="160" height="200" as="geometry" />
        </mxCell>
        
        <!-- Quiz Results (NEW) -->
        <mxCell id="quiz_results" value="&lt;b&gt;quiz_results&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;user_id (FK)&lt;br&gt;question_id (FK)&lt;br&gt;score&lt;br&gt;completed_at&lt;br&gt;time_taken&lt;br&gt;answer_selected&lt;br&gt;is_correct" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="900" y="150" width="140" height="160" as="geometry" />
        </mxCell>
        
        <!-- User Conversations (MODIFY) -->
        <mxCell id="user_conversations" value="&lt;b&gt;user_conversations&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;user_id (FK)&lt;br&gt;conversation_type&lt;br&gt;conversation_data (JSON)&lt;br&gt;created_at&lt;br&gt;&lt;br&gt;&lt;i&gt;+ needs tag relationship&lt;/i&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#f8d7da;strokeColor=#dc3545;fontColor=#721c24;" vertex="1" parent="1">
          <mxGeometry x="80" y="380" width="160" height="140" as="geometry" />
        </mxCell>
        
        <!-- Conversation Tags (NEW) -->
        <mxCell id="conversation_tags" value="&lt;b&gt;conversation_tags&lt;/b&gt;&lt;hr&gt;conversation_id (FK)&lt;br&gt;tag_id (FK)" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="320" y="400" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Workout Plans (MODIFY) -->
        <mxCell id="workout_plans" value="&lt;b&gt;workout_plans&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;user_id (FK)&lt;br&gt;sport&lt;br&gt;position&lt;br&gt;plan_data (JSON)&lt;br&gt;created_at&lt;br&gt;&lt;br&gt;&lt;i&gt;+ needs saved_by_user&lt;/i&gt;&lt;br&gt;&lt;i&gt;+ needs tag relationship&lt;/i&gt;" style="whiteSpace=wrap;html=1;align=left;fillColor=#f8d7da;strokeColor=#dc3545;fontColor=#721c24;" vertex="1" parent="1">
          <mxGeometry x="540" y="380" width="160" height="160" as="geometry" />
        </mxCell>
        
        <!-- Workout Plan Tags (NEW) -->
        <mxCell id="workout_plan_tags" value="&lt;b&gt;workout_plan_tags&lt;/b&gt;&lt;hr&gt;workout_plan_id (FK)&lt;br&gt;tag_id (FK)" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="780" y="400" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Quiz Result Tags (NEW) -->
        <mxCell id="quiz_result_tags" value="&lt;b&gt;quiz_result_tags&lt;/b&gt;&lt;hr&gt;quiz_result_id (FK)&lt;br&gt;tag_id (FK)" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="280" y="320" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Progress Metrics (EXISTS) -->
        <mxCell id="progress_metrics" value="&lt;b&gt;progress_metrics&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;user_id (FK)&lt;br&gt;metric_type&lt;br&gt;value&lt;br&gt;date_recorded" style="whiteSpace=wrap;html=1;align=left;fillColor=#d4edda;strokeColor=#28a745;fontColor=#155724;" vertex="1" parent="1">
          <mxGeometry x="80" y="580" width="140" height="120" as="geometry" />
        </mxCell>
        
        <!-- Social Shares (NEW) -->
        <mxCell id="social_shares" value="&lt;b&gt;social_shares&lt;/b&gt;&lt;hr&gt;id (PK)&lt;br&gt;user_id (FK)&lt;br&gt;quiz_result_id (FK)&lt;br&gt;platform&lt;br&gt;shared_at" style="whiteSpace=wrap;html=1;align=left;fillColor=#fff3cd;strokeColor=#ffc107;fontColor=#856404;" vertex="1" parent="1">
          <mxGeometry x="500" y="580" width="140" height="120" as="geometry" />
        </mxCell>
        
        <!-- Relationships -->
        <mxCell id="rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="users" target="tags">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel1-label" value="1:n" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel1">
          <mxGeometry x="-0.1" y="-2" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="quiz_categories" target="quiz_questions">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel2-label" value="1:n" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel2">
          <mxGeometry x="-0.1" y="-2" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="quiz_questions" target="quiz_results">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel3-label" value="1:n" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel3">
          <mxGeometry x="-0.1" y="-2" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="users" target="user_conversations">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel4-label" value="1:n" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel4">
          <mxGeometry x="-0.1" y="-2" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="rel5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.7;entryX=0;entryY=0.5;" edge="1" parent="1" source="users" target="workout_plans">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel5-label" value="1:n" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel5">
          <mxGeometry x="-0.1" y="-2" relative="1" as="geometry" />
        </mxCell>
        
        <!-- Tag relationships -->
        <mxCell id="rel6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="tags" target="conversation_tags">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel6-label" value="1:n" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="rel6">
          <mxGeometry x="-0.1" y="-2" relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="rel7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="conversation_tags" target="workout_plan_tags">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Notes -->
        <mxCell id="notes" value="&lt;b&gt;Implementation Notes:&lt;/b&gt;&lt;br&gt;• Quiz data: Move from frontend static files to PostgreSQL&lt;br&gt;• Tagging: Generic system for chats, workouts, quiz results&lt;br&gt;• Save functionality: Add to workout plans with user flag&lt;br&gt;• Search: Support filtering by tag, date, score threshold&lt;br&gt;• Social: Result cards + Facebook sharing integration" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;fillColor=#f8f9fa;strokeColor=#6c757d;fontColor=#495057;" vertex="1" parent="1">
          <mxGeometry x="80" y="730" width="960" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>